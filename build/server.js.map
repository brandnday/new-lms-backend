{"version":3,"sources":["../src/server.js"],"names":["Koa","require","Router","Logger","Cors","BodyParser","Helmet","respond","session","passport","app","router","keys","use","process","env","NODE_ENV","enableTypes","jsonLimit","strict","onerror","err","ctx","throw","initialize","routes","allowedMethods","module","exports"],"mappings":"AAAA,MAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,MAAMC,SAASD,QAAQ,YAAR,CAAf;AACA,MAAME,SAASF,QAAQ,YAAR,CAAf;AACA,MAAMG,OAAOH,QAAQ,WAAR,CAAb;AACA,MAAMI,aAAaJ,QAAQ,gBAAR,CAAnB;AACA,MAAMK,SAASL,QAAQ,YAAR,CAAf;AACA,MAAMM,UAAUN,QAAQ,aAAR,CAAhB;;AAEA,MAAMO,UAAUP,QAAQ,aAAR,CAAhB;AACA,MAAMQ,WAAWR,QAAQ,cAAR,CAAjB;;AAGA,MAAMS,MAAM,IAAIV,GAAJ,EAAZ;AACA,MAAMW,SAAS,IAAIT,MAAJ,EAAf;;AAEAQ,IAAIE,IAAJ,GAAW,CAAC,eAAD,EAAkB,eAAlB,CAAX;AACAF,IAAIG,GAAJ,CAAQL,QAAQE,GAAR,CAAR;;AAEAA,IAAIG,GAAJ,CAAQP,QAAR;;AAEA,IAAIQ,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CN,MAAIG,GAAJ,CAAQV,QAAR;AACD;;AAEDO,IAAIG,GAAJ,CAAQT,MAAR;AACAM,IAAIG,GAAJ,CAAQR,WAAW;AACjBY,eAAa,CAAC,MAAD,CADI;AAEjBC,aAAW,KAFM;AAGjBC,UAAQ,KAHS;AAIjBC,WAAS,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC3BA,QAAIC,KAAJ,CAAU,kBAAV,EAA8B,GAA9B;AACD;AANgB,CAAX,CAAR;;AASAtB,QAAQ,iBAAR;AACAS,IAAIG,GAAJ,CAAQJ,SAASe,UAAT,EAAR;AACAd,IAAIG,GAAJ,CAAQJ,SAASD,OAAT,EAAR;;AAEAE,IAAIG,GAAJ,CAAQN,SAAR;;AAEA;AACAN,QAAQ,UAAR,EAAoBU,MAApB;AACAD,IAAIG,GAAJ,CAAQF,OAAOc,MAAP,EAAR;AACAf,IAAIG,GAAJ,CAAQF,OAAOe,cAAP,EAAR;;AAEAC,OAAOC,OAAP,GAAiBlB,GAAjB","file":"server.js","sourcesContent":["const Koa = require('koa')\nconst Router = require('koa-router')\nconst Logger = require('koa-logger')\nconst Cors = require('@koa/cors')\nconst BodyParser = require('koa-bodyparser')\nconst Helmet = require('koa-helmet')\nconst respond = require('koa-respond')\n\nconst session = require('koa-session');\nconst passport = require('koa-passport');\n\n\nconst app = new Koa()\nconst router = new Router()\n\napp.keys = ['newcookie!key', 'oldcookie!key'];\napp.use(session(app));\n\napp.use(Helmet())\n\nif (process.env.NODE_ENV === 'development') {\n  app.use(Logger())\n}\n\napp.use(Cors())\napp.use(BodyParser({\n  enableTypes: ['json'],\n  jsonLimit: '5mb',\n  strict: false,\n  onerror: function (err, ctx) {\n    ctx.throw('body parse error', 422)\n  }\n}))\n\nrequire('./services/auth');\napp.use(passport.initialize());\napp.use(passport.session());\n\napp.use(respond())\n\n// API routes\nrequire('./routes')(router)\napp.use(router.routes())\napp.use(router.allowedMethods())\n\nmodule.exports = app\n"]}